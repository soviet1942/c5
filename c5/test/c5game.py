'''
Created on 2017年10月18日

@author: Administrator
'''
from urllib import request
from bs4 import BeautifulSoup
from urllib.request import urlretrieve
import re
import pymysql
import time
import uuid

def start(i):
    proxy_support = request.ProxyHandler(proxys[i%proxys.__len__()])
    opener = request.build_opener(proxy_support)
    opener.addheaders = [('User-Agent','Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0'),('Accept-Language','zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3')]
    request.install_opener(opener)
    #基础
    url = 'https://www.c5game.com/csgo/item/index.html?item_id={}&type=S'.format(i)
    response = request.urlopen(url, timeout=10)
    html = response.read().decode("utf-8")
    #------------------------------------
    bf = BeautifulSoup(html, 'lxml')
    #输出4个span，每个span分别对应着csgo游戏标识，品质，稀有度，武器饰品类型
    item_attr = bf.find(class_='ft-gray').find_all('span')
    ifcsgo = re.findall(r'class="(.*)"', str(item_attr[0]))[0]
    if(ifcsgo != "icon-csgo"): return#如果种类不是csgo那就跳过吧
    quality = quality_dic.get(re.findall(r'class="(.*)"', str(item_attr[1]))[0])
    rarity = rarity_dic.get(re.findall(r'class="(.*)"', str(item_attr[2]))[0])
    csgotype = item_attr[3].get_text()
    if(type_dic.get(csgotype)!= None):
        csgotype = type_dic.get(csgotype)
    #获取文字部分内容
    name_url = bf.find(class_='sale-item-info').find(class_="name")
    name_text = name_url.span.get_text().strip()
    item_type = re.match(r'([“ ]?\w+[- ]?\w*)', name_text).group().rstrip()
    if(type_filter_arr.__contains__(csgotype)): item_type = csgotype
    item_exterior = re.findall(r'\(([\u4E00-\u9FA5]*)\)', name_text)
    exterior_list = ['崭新出厂', '略有磨损', '久经沙场', '破损不堪', '战痕累累', '无涂装']
    exterior = "无"
    if(item_exterior.__len__()==1):
        if(exterior_list.__contains__(item_exterior[0])):
            exterior = item_exterior[0]
    #价格和销量
    price_ = bf.find(class_='hero')
    price = re.findall(r'￥[ ]?(\d+[.]?\d*)', price_.span.get_text())[0]
    sales_ = bf.find(class_='sale-items-sty1').find('li')
    sales = sales_.span.get_text()
    #图片部分
    img_url = bf.find(class_='sale-item-img csgo-img-bg text-center imgs')
    img_src = str(img_url.img.get('src'))
    image_n = re.sub(r'\([\u4E00-\u9FA5]*\)', "", name_text).rstrip()
    image_name = uuid.uuid3(uuid.NAMESPACE_DNS, image_n).__str__()
    urlretrieve(url = img_src,filename = 'F:\\CSGO\\csitem\\' + image_name + '.png')
    print("----------------------------"+str(i)+"----------"+str(proxys[i%10])+"--------------------------------")
    print("name:"+name_text+"type:"+csgotype+"item_type:"+item_type+"price:"+price+"exterior:"+exterior+"quality:"+quality+"rarity:"+rarity+"sales:"+sales+"img"+image_name)
    try:
        cursor.execute("INSERT INTO item (type,item_type,item_name,price,img,exterior,quality,rarity,sales) VALUES ('%s','%s','%s','%s','%s','%s','%s','%s','%s')"% (csgotype,item_type,name_text,price,image_name,exterior,quality,rarity,sales)) 
        conn.commit()
    except:
        # 发生错误时回滚
        conn.rollback()
        print("错误发生于"+str(i))

if __name__ == "__main__":
    #打开数据库连接:host-连接主机地址,port-端口号,user-用户名,passwd-用户密码,db-数据库名,charset-编码
    conn = pymysql.connect(host='127.0.0.1', port=3306, user='root', passwd='1234',db='game',charset='utf8')
    #使用cursor()方法获取操作游标
    cursor = conn.cursor() 
    #字典
    proxys = [{'http':'218.18.232.29:8080'},{'http':'60.175.199.193:32945'},{'http':'110.73.4.175:8123'},{'http':'180.115.1.17:44697'},{'http':'125.83.52.52:9999'},{'http':'60.178.71.152:25022'},{'http':'117.27.113.81:808'},{'http':'171.39.41.18:8123'},{'http':'171.37.86.159:8123'},{'http':'171.37.154.86:8123'},{'http': '110.73.41.36:8123'}, {'http': '111.155.116.220:8123'}, {'http': '27.150.87.86:34339'}, {'http': '122.4.29.200:47088'}, {'http': '121.204.165.176:8118'}, {'http': '125.109.199.228:29868'}, {'http': '119.55.116.118:9999'}, {'http': '115.203.181.125:42413'}, {'http': '111.155.120.178:8123'}, {'http': '123.55.178.146:41995'}, {'http': '222.76.144.133:35610'}, {'http': '121.31.100.95:8123'}, {'http': '222.93.230.11:8118'}, {'http': '113.128.29.31:43319'}, {'http': '113.121.180.166:808'}, {'http': '182.88.164.56:8123'}, {'http': '110.73.54.1:8123'}, {'http': '125.125.214.128:10000'}, {'http': '111.78.172.92:22467'}, {'http': '125.122.19.168:22500'}, {'http': '220.165.176.27:9999'}, {'http': '114.115.216.99:80'}, {'http': '124.72.96.138:22766'}, {'http': '113.120.63.235:21108'}, {'http': '182.34.16.88:28444'}, {'http': '123.55.185.48:25365'}, {'http': '36.35.127.240:9999'}, {'http': '125.113.252.185:41030'}, {'http': '122.4.163.0:808'}, {'http': '122.4.28.27:37393'}, {'http': '219.132.25.105:808'}, {'http': '117.86.205.91:8888'}, {'http': '110.72.43.46:8123'}, {'http': '222.85.22.21:808'}, {'http': '42.242.151.65:9999'}, {'http': '113.4.196.75:9999'}, {'http': '49.89.77.225:20853'}, {'http': '110.73.7.202:8123'}, {'http': '49.87.146.96:45340'}, {'http': '121.31.197.34:8123'}, {'http': '125.211.202.26:53281'}, {'http': '27.18.131.209:808'}, {'http': '110.73.1.162:8123'}, {'http': '171.39.28.113:8123'}, {'http': '36.35.48.206:9999'}, {'http': '119.162.211.8:8118'}, {'http': '183.133.78.32:8118'}, {'http': '114.239.249.172:23344'}, {'http': '182.88.254.109:8123'}, {'http': '101.64.103.251:9999'}, {'http': '110.73.7.159:8123'}, {'http': '171.38.197.112:8123'}, {'http': '175.19.42.253:8080'}, {'http': '49.85.5.251:27532'}, {'http': '218.108.215.36:80'}, {'http': '120.40.134.218:27540'}, {'http': '49.77.211.53:40712'}, {'http': '60.169.216.147:41858'}, {'http': '49.87.146.217:29126'}, {'http': '110.73.0.56:8123'}, {'http': '218.56.200.156:8118'}, {'http': '115.226.15.249:1080'}, {'http': '182.246.219.246:80'}, {'http': '218.73.138.161:40722'}, {'http': '221.227.250.46:8888'}, {'http': '116.25.14.173:8118'}, {'http': '101.65.42.153:9999'}, {'http': '110.73.9.147:8123'}, {'http': '121.206.84.177:48948'}, {'http': '120.40.38.132:808'}, {'http': '110.72.19.194:8123'}, {'http': '183.19.211.15:808'}, {'http': '120.78.15.63:80'}, {'http': '115.213.200.146:808'}
              , {'http': '180.118.47.45:34396'}, {'http': '115.203.162.13:35761'}, {'http': '49.84.46.37:43612'}, {'http': '220.162.4.243:32932'}, {'http': '182.88.254.109:8123'}, {'http': '182.42.36.232:808'}, {'http': '111.155.116.215:8123'}, {'http': '110.73.11.251:8123'}, {'http': '101.205.125.54:9999'}, {'http': '36.6.214.157:808'}, {'http': '61.143.19.85:40423'}, {'http': '36.25.111.252:26182'}, {'http': '117.28.144.90:20085'}, {'http': '120.32.137.227:37606'}, {'http': '115.221.127.232:41445'}, {'http': '139.211.65.137:9999'}, {'http': '180.121.166.98:30124'}, {'http': '113.121.164.197:40214'}, {'http': '121.31.100.14:8123'}, {'http': '110.73.43.21:8123'}, {'http': '171.38.1.0:8123'}, {'http': '60.169.223.228:40555'}, {'http': '183.158.23.204:45997'}, {'http': '110.73.9.147:8123'}, {'http': '182.90.69.94:8123'}, {'http': '183.130.10.85:80'}, {'http': '101.205.241.217:9999'}, {'http': '120.76.55.49:8088'}, {'http': '58.45.73.160:808'}, {'http': '110.73.32.67:8123'}, {'http': '182.88.164.56:8123'}, {'http': '110.73.55.154:8123'}, {'http': '222.37.182.228:9999'}, {'http': '125.64.90.123:808'}, {'http': '42.230.43.156:4331'}, {'http': '171.125.180.198:9999'}, {'http': '59.40.50.63:8010'}, {'http': '61.142.240.132:808'}, {'http': '106.87.66.46:9999'}, {'http': '110.72.16.172:8123'}, {'http': '182.88.215.166:8123'}, {'http': '180.121.133.111:8118'}, {'http': '180.122.150.15:36271'}, {'http': '110.72.26.114:8123'}, {'http': '222.85.50.4:808'}, {'http': '113.121.250.16:808'}, {'http': '171.39.237.24:8123'}, {'http': '110.73.1.180:8123'}, {'http': '119.114.148.68:9999'}, {'http': '222.85.19.191:40692'}, {'http': '114.230.127.26:23416'}, {'http': '60.178.30.228:9999'}, {'http': '49.87.178.154:43518'}, {'http': '110.73.1.151:8123'}, {'http': '49.85.5.251:27532'}, {'http': '123.170.67.73:9999'}, {'http': '218.81.135.138:28796'}, {'http': '171.36.132.255:9999'}, {'http': '110.73.29.184:8123'}, {'http': '14.105.31.13:9999'}, {'http': '183.133.50.64:80'}, {'http': '221.227.250.46:8888'}, {'http': '123.163.167.0:29340'}, {'http': '220.166.242.8:8118'}, {'http': '139.211.64.153:9999'}, {'http': '106.110.214.194:45838'}, {'http': '49.70.194.178:29735'}, {'http': '27.8.31.53:808'}, {'http': '59.40.69.203:8010'}, {'http': '110.73.7.44:8123'}, {'http': '123.54.224.38:45399'}, {'http': '121.31.101.153:8123'}, {'http': '171.39.40.29:8123'}, {'http': '140.250.133.243:32912'}, {'http': '182.45.241.147:9999'}, {'http': '113.121.46.16:41295'}, {'http': '114.238.55.157:29829'}, {'http': '110.73.54.218:8123'}, {'http': '180.108.58.211:33974'}, {'http': '123.163.160.247:25636'}
              ,{'http': '110.73.43.88:8123'}, {'http': '123.55.2.53:808'}, {'http': '110.73.8.191:8123'}, {'http': '115.226.142.133:23812'}, {'http': '110.72.24.250:8123'}, {'http': '49.65.164.102:808'}, {'http': '59.40.50.253:8010'}, {'http': '175.43.180.233:9999'}, {'http': '110.73.8.192:8123'}, {'http': '110.73.8.24:8123'}, {'http': '27.40.134.212:61234'}, {'http': '222.185.33.191:33996'}, {'http': '171.13.0.246:40310'}, {'http': '121.31.136.119:8123'}, {'http': '119.51.67.226:9999'}, {'http': '121.12.42.86:61234'}, {'http': '123.55.190.224:36298'}, {'http': '113.121.242.32:808'}, {'http': '180.118.241.63:808'}, {'http': '110.73.9.71:8123'}, {'http': '113.128.28.142:20181'}, {'http': '121.31.102.184:8123'}, {'http': '175.151.7.213:9999'}, {'http': '60.175.198.205:24392'}, {'http': '110.73.48.255:8123'}, {'http': '114.217.10.109:8118'}, {'http': '110.73.41.168:8123'}, {'http': '110.73.13.221:8123'}, {'http': '110.73.51.157:8123'}, {'http': '182.43.171.35:808'}, {'http': '110.73.40.150:8123'}, {'http': '171.39.43.200:8123'}, {'http': '119.5.101.218:9999'}, {'http': '110.73.41.251:8123'}, {'http': '222.247.150.229:80'}, {'http': '110.73.8.144:8123'}, {'http': '114.99.2.231:808'}, {'http': '114.101.132.98:47486'}, {'http': '110.73.54.229:8123'}, {'http': '171.37.194.193:8123'}, {'http': '121.13.55.252:8118'}, {'http': '60.182.237.253:34988'}, {'http': '115.63.121.207:9999'}, {'http': '122.5.132.221:37006'}, {'http': '123.163.146.27:32765'}, {'http': '110.73.42.29:8123'}, {'http': '27.18.132.174:808'}, {'http': '222.71.125.236:37477'}, {'http': '171.36.63.122:8123'}, {'http': '39.72.22.101:9999'}, {'http': '110.73.52.205:8123'}, {'http': '121.31.102.138:8123'}, {'http': '115.46.228.139:8123'}, {'http': '117.64.234.112:8998'}, {'http': '110.72.30.69:8123'}, {'http': '171.39.1.51:8123'}, {'http': '121.12.42.48:61234'}, {'http': '171.39.42.110:8123'}, {'http': '115.63.98.150:9999'}, {'http': '110.73.4.190:8123'}, {'http': '121.31.101.76:8123'}, {'http': '115.46.70.114:8123'}, {'http': '122.4.44.108:43730'}, {'http': '183.157.177.6:80'}, {'http': '171.39.43.195:8123'}, {'http': '222.42.227.157:9999'}, {'http': '110.73.1.54:8123'}, {'http': '110.73.14.173:8123'}, {'http': '171.12.232.42:42719'}, {'http': '218.14.142.186:49257'}, {'http': '110.73.1.112:8123'}, {'http': '183.190.244.97:80'}, {'http': '60.184.109.208:33491'}, {'http': '110.72.42.145:8123'}, {'http': '121.31.197.209:8123'}, {'http': '106.58.150.19:80'}, {'http': '121.31.101.156:8123'}, {'http': '171.39.42.28:8123'}, {'http': '110.72.40.118:8123'}, {'http': '59.40.69.33:8010'}, {'http': '121.31.141.158:8123'}, {'http': '182.90.12.84:8118'}, {'http': '180.118.192.222:34144'}, {'http': '110.73.147.233:8123'}, {'http': '59.40.50.209:8010'},
              {'http': '111.155.116.236:8123'}, {'http': '222.161.154.25:9999'}, {'http': '121.31.102.36:8123'}, {'http': '60.169.78.218:808'}, {'http': '59.40.51.149:8010'}, {'http': '221.227.251.229:8888'}, {'http': '182.42.38.49:35885'}, {'http': '119.137.194.35:80'}, {'http': '110.73.2.48:8123'}, {'http': '123.163.146.27:32765'}, {'http': '59.40.68.147:8010'}, {'http': '121.31.103.41:8123'}, {'http': '121.31.100.171:8123'}, {'http': '121.12.42.231:61234'}, {'http': '171.124.61.115:9999'}, {'http': '180.122.150.203:36273'}, {'http': '110.73.11.140:8123'}, {'http': '182.42.38.79:808'}, {'http': '123.55.2.29:30433'}, {'http': '121.204.165.116:8118'}, {'http': '183.151.144.46:8118'}, {'http': '218.85.192.146:45700'}, {'http': '110.73.1.135:8123'}, {'http': '110.73.40.104:8123'}, {'http': '110.73.1.101:8123'}, {'http': '124.165.170.146:9999'}, {'http': '110.73.5.145:8123'}, {'http': '114.230.197.2:8118'}, {'http': '121.31.173.145:8123'}, {'http': '121.12.42.68:61234'}, {'http': '49.87.180.107:44472'}, {'http': '121.12.42.99:61234'}, {'http': '121.31.138.238:8123'}, {'http': '27.40.132.95:61234'}, {'http': '59.40.51.123:8010'}, {'http': '171.127.212.109:9999'}, {'http': '110.73.50.234:8123'}, {'http': '124.72.96.215:27479'}, {'http': '121.12.42.250:61234'}, {'http': '113.121.245.207:29273'}, {'http': '125.122.94.121:808'}, {'http': '115.201.181.143:9999'}, {'http': '27.40.134.51:61234'}, {'http': '180.107.29.160:9999'}, {'http': '113.121.242.32:808'}, {'http': '59.40.68.176:8010'}, {'http': '27.40.136.37:61234'}, {'http': '222.161.127.5:9999'}, {'http': '123.163.162.216:22666'}, {'http': '60.17.243.174:9999'}, {'http': '113.121.21.46:808'}, {'http': '171.12.232.42:42719'}, {'http': '110.73.9.186:8123'}, {'http': '125.72.106.151:808'}, {'http': '111.155.116.212:8123'}, {'http': '110.73.5.96:8123'}, {'http': '180.122.145.149:35825'}, {'http': '182.88.188.243:8123'}, {'http': '121.31.101.51:8123'}, {'http': '153.36.132.204:9999'}, {'http': '59.40.50.30:8010'}, {'http': '49.87.182.126:35011'}, {'http': '117.64.234.112:8998'}, {'http': '112.64.104.56:8118'}, {'http': '171.38.97.227:8118'}, {'http': '139.213.51.243:9999'}, {'http': '121.31.177.198:8123'}, {'http': '222.185.33.191:33996'}, {'http': '182.37.43.249:9999'}, {'http': '180.115.8.87:27929'}, {'http': '114.99.94.101:21868'}, {'http': '119.5.101.218:9999'}, {'http': '182.90.117.137:8123'}, {'http': '121.31.100.228:8123'}, {'http': '222.76.146.183:45832'}, {'http': '119.52.222.68:9999'}, {'http': '219.155.10.249:8118'}, {'http': '27.40.146.156:61234'}, {'http': '110.73.41.69:8123'}, {'http': '113.121.163.109:23621'}, {'http': '42.225.81.198:9999'},
              {'http': '59.40.50.110:8010'}, {'http': '222.221.222.249:9999'}, {'http': '171.125.109.144:9999'}, {'http': '182.32.150.235:23013'}, {'http': '112.114.112.84:9999'}, {'http': '122.241.75.139:3128'}, {'http': '114.231.71.241:27174'}, {'http': '110.73.6.75:8123'}, {'http': '115.46.66.90:8123'}, {'http': '27.22.107.197:3128'}, {'http': '49.87.183.63:41265'}, {'http': '171.38.77.153:8123'}, {'http': '113.121.243.155:808'}, {'http': '110.73.40.219:8123'}, {'http': '121.31.101.1:8123'}, {'http': '120.86.132.118:9999'}, {'http': '110.73.42.167:8123'}, {'http': '182.88.88.196:8123'}, {'http': '171.38.7.134:8123'}, {'http': '101.17.51.213:9999'}, {'http': '171.39.44.97:8123'}, {'http': '121.12.42.64:61234'}, {'http': '221.4.133.67:53281'}, {'http': '121.32.89.106:808'}, {'http': '180.118.240.202:808'}, {'http': '180.115.8.64:47615'}, {'http': '49.70.41.52:23024'}, {'http': '112.194.111.188:9999'}, {'http': '27.184.125.106:8118'}, {'http': '171.127.248.21:9999'}, {'http': '110.73.34.237:8123'}, {'http': '180.118.240.105:61234'}, {'http': '116.30.192.84:53281'}, {'http': '122.82.221.247:9999'}, {'http': '112.117.47.223:808'}, {'http': '119.5.0.39:808'}, {'http': '110.73.35.69:8123'}, {'http': '110.73.49.52:8123'}, {'http': '171.39.15.129:8123'}, {'http': '59.40.50.126:8010'}, {'http': '116.30.249.208:8118'}, {'http': '223.240.247.220:8123'}, {'http': '123.53.137.228:37096'}, {'http': '115.46.110.229:8123'}, {'http': '59.40.51.37:8010'}, {'http': '121.12.42.11:61234'}, {'http': '123.163.20.182:32802'}, {'http': '112.86.67.136:9999'}, {'http': '1.31.202.99:9999'}, {'http': '119.116.217.208:9999'}, {'http': '180.121.128.39:8888'}, {'http': '182.88.163.0:8123'}, {'http': '121.12.42.40:61234'}, {'http': '182.88.88.24:8123'}, {'http': '59.40.51.172:8010'}, {'http': '110.73.52.55:8123'}, {'http': '171.39.28.114:8123'}, {'http': '114.229.36.146:24793'}, {'http': '180.155.134.28:41263'}, {'http': '124.161.147.11:9999'}, {'http': '114.239.2.23:808'}, {'http': '110.73.30.134:8123'}, {'http': '110.73.13.230:8123'}, {'http': '122.159.221.149:9999'}, {'http': '121.12.42.81:61234'}, {'http': '114.229.244.164:46335'}, {'http': '182.91.77.215:9999'}, {'http': '42.225.81.198:9999'}, {'http': '110.73.3.7:8123'}, {'http': '116.208.15.174:3128'}, {'http': '42.225.149.21:9999'}, {'http': '115.226.156.74:35936'}, {'http': '180.118.70.250:23140'}, {'http': '180.155.137.123:30334'}, {'http': '124.165.162.193:9999'}, {'http': '113.121.248.243:808'}, {'http': '123.53.133.199:41345'}, {'http': '110.73.8.233:8123'}, {'http': '110.73.14.127:8123'}, {'http': '183.63.140.82:53281'}, {'http': '171.39.0.85:8123'}, {'http': '114.226.160.223:26501'}, {'http': '222.89.81.95:44029'}, {'http': '111.224.106.41:8118'}, {'http': '182.43.199.136:49938'},
              {'http': '110.73.42.223:8123'}, {'http': '110.73.6.100:8123'}, {'http': '115.46.65.77:8123'}, {'http': '110.73.31.221:8123'}, {'http': '175.175.128.84:9999'}, {'http': '59.40.69.169:8010'}, {'http': '106.58.121.159:80'}, {'http': '122.138.182.173:9999'}, {'http': '140.250.140.14:24744'}, {'http': '171.39.115.146:8123'}, {'http': '115.221.112.188:808'}, {'http': '175.154.152.230:9999'}, {'http': '171.37.91.68:8123'}, {'http': '110.73.3.132:8123'}, {'http': '49.85.13.43:34273'}, {'http': '27.40.138.22:61234'}, {'http': '121.31.101.98:8123'}, {'http': '182.88.4.237:8123'}, {'http': '114.230.98.243:47880'}, {'http': '115.46.64.238:8123'}, {'http': '182.88.178.243:8123'}, {'http': '106.5.156.213:38816'}, {'http': '115.230.79.32:49442'}, {'http': '182.42.38.18:808'}, {'http': '121.31.103.254:8123'}, {'http': '27.159.127.95:8118'}, {'http': '124.165.170.185:9999'}, {'http': '171.121.85.226:9999'}, {'http': '121.12.42.237:61234'}, {'http': '122.157.248.254:9999'}, {'http': '110.73.9.225:8123'}, {'http': '113.124.94.120:34190'}, {'http': '220.189.119.42:808'}, {'http': '113.124.92.6:45176'}, {'http': '223.241.118.248:8010'}, {'http': '125.41.107.243:8118'}, {'http': '115.220.226.176:8118'}, {'http': '110.73.33.130:8123'}, {'http': '120.42.127.82:38856'}, {'http': '115.210.79.156:32799'}, {'http': '114.232.169.84:48924'}, {'http': '110.73.41.133:8123'}, {'http': '27.40.155.116:61234'}, {'http': '171.118.110.1:9999'}, {'http': '59.40.69.95:8010'}, {'http': '115.209.195.232:45658'}, {'http': '101.68.73.54:53281'}, {'http': '58.48.130.94:8118'}, {'http': '114.239.145.145:808'}, {'http': '1.199.195.78:45755'}, {'http': '27.153.128.20:23416'}, {'http': '118.120.184.149:36253'}, {'http': '218.66.147.64:26642'}, {'http': '182.45.87.86:9999'}, {'http': '120.78.129.196:808'}, {'http': '218.81.152.128:25741'}, {'http': '110.6.26.25:9999'}, {'http': '171.37.245.160:8123'}, {'http': '121.232.73.16:8118'}, {'http': '182.32.150.107:32549'}, {'http': '121.12.42.135:61234'}, {'http': '123.55.191.50:808'}, {'http': '115.213.250.248:36095'}, {'http': '114.231.153.23:23907'}, {'http': '110.73.43.210:8123'}, {'http': '110.73.41.175:8123'}, {'http': '114.101.136.87:25191'}, {'http': '27.40.148.92:61234'}, {'http': '61.143.23.203:44866'}, {'http': '42.49.119.157:8118'}, {'http': '175.20.106.234:9999'}, {'http': '49.87.75.202:44476'}, {'http': '27.159.125.66:8118'}, {'http': '121.12.42.173:61234'}, {'http': '59.40.68.110:8010'}, {'http': '171.38.73.88:8123'}, {'http': '113.121.171.137:20434'}, {'http': '27.40.155.26:61234'}, {'http': '110.166.254.120:808'}, {'http': '110.73.42.148:8123'}, {'http': '122.242.219.145:24591'}]
    type_filter_arr = ['印花', '音乐盒', '胸章', '涂鸦', '标签', '通行证', '武器箱', '钥匙']
    quality_dic = {'text-unique':'无', 'text-normal':'普通', 'text-strange':'StatTrak™', 'text-tournament':'纪念品', 'text-unusual':'★', 'text-genuine':'纯正'}
    rarity_dic = {'rarity-ancient_weapon':'无', 'rarity-mythical':'受限', 'rarity-ancient':'隐秘', 'rarity-common':'普通级', 'rarity-rare':'军舰级', 'rarity-uncommon':'工业级', 'rarity-legendary':'保密', 'rarity-contraband':'违禁', 'rarity-immortal':'保密'}
    type_dic = {'csgo_type_collectible':'胸章', 'csgo_type_musickit':'音乐盒', 'csgo_type_spray':'涂鸦'}
    #访问csgo饰品从24729到27899开始遍历
    for j in range(22372, 27899):
        try:
            start(j)
        except:
            print("出现异常")
            time.sleep(5)
            start(j)
        

    # 关闭数据库连接
    cursor.close() 
    conn.close()
    
